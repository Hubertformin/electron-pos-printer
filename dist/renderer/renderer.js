(()=>{"use strict";var e={496:e=>{e.exports=require("electron")},867:e=>{e.exports=require("jsbarcode")},121:e=>{e.exports=require("qrcode")}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var l=t[r]={exports:{}};return e[r](l,l.exports,n),l.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{const e=require("fs");var t=n.n(e);const r=require("path");var i=n.n(r),l=function(e,t,n,r){return new(n||(n=Promise))((function(i,l){function o(e){try{a(r.next(e))}catch(e){l(e)}}function d(e){try{a(r.throw(e))}catch(e){l(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,d)}a((r=r.apply(e,t||[])).next())}))};const o=n(121);function d(e,t="td"){const n=e.value;let r;return r=document.createElement(t),r.innerHTML=n,r=s(r,Object.assign({padding:"7px 2px"},e.style)),r}function a(e){return new Promise(((n,r)=>l(this,void 0,void 0,(function*(){let l,o=document.createElement("div");const d=["apng","bmp","gif","ico","cur","jpeg","jpg","jpeg","jfif","pjpeg","pjp","png","svg","tif","tiff","webp"];if(o=s(o,{width:"100%",display:"flex",justifyContent:(null==e?void 0:e.position)||"left"}),e.url){const t=(a=e.url,Buffer.from(a,"base64").toString("base64")===a);if(!function(e){let t;try{t=new URL(e)}catch(e){return!1}return"http:"===t.protocol||"https:"===t.protocol}(e.url)&&!t)return r(`Invalid url: ${e.url}`);l=t?"data:image/png;base64,"+e.url:e.url}else if(e.path)try{const n=t().readFileSync(e.path);let o=i().extname(e.path).slice(1);-1===d.indexOf(o)&&r(new Error(o+" file type not supported, consider the types: "+d.join())),"svg"===o&&(o="svg+xml"),l="data:image/"+o+";base64,"+n.toString("base64")}catch(e){r(e)}var a;let c=document.createElement("img");c=s(c,Object.assign({height:e.height,width:e.width},e.style)),c.src=l,o.prepend(c),n(o)}))))}function s(e,t){for(const n of Object.keys(t))t[n]&&(e.style[n]=t[n]);return e}var c=function(e,t,n,r){return new(n||(n=Promise))((function(i,l){function o(e){try{a(r.next(e))}catch(e){l(e)}}function d(e){try{a(r.throw(e))}catch(e){l(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,d)}a((r=r.apply(e,t||[])).next())}))};const u=n(496).ipcRenderer,p=n(867),h=document.getElementById("main");u.on("body-init",(function(e,t){h.style.width=(null==t?void 0:t.width)||"100%",h.style.margin=(null==t?void 0:t.margin)||0,e.sender.send("body-init-reply",{status:!0,error:null})})),u.on("render-line",(function(e,t){var n,r,i;return c(this,void 0,void 0,(function*(){switch(t.line.type){case"text":try{h.appendChild(function(e){const t=e.value;let n=document.createElement("div");return n.innerHTML=t,n=s(n,e.style),n}(t.line)),e.sender.send("render-line-reply",{status:!0,error:null})}catch(t){e.sender.send("render-line-reply",{status:!1,error:t.toString()})}return;case"image":try{const n=yield a(t.line);h.appendChild(n),e.sender.send("render-line-reply",{status:!0,error:null})}catch(t){e.sender.send("render-line-reply",{status:!1,error:t.toString()})}return;case"qrCode":try{const r=document.createElement("div");r.style.display="flex",r.style.justifyContent=(null===(n=t.line)||void 0===n?void 0:n.position)||"left";const i=document.createElement("canvas");i.setAttribute("id",`qrCode${t.lineIndex}`),s(i,{textAlign:t.line.position?"-webkit-"+t.line.position:"-webkit-left"}),r.appendChild(i),h.appendChild(r),yield function(e,{value:t,height:n=15,width:r=1}){return new Promise(((i,l)=>{const d=document.getElementById(e),a={width:r,height:n,errorCorrectionLevel:"H",color:"#000"};o.toCanvas(d,t,a).then(i).catch((e=>{l(e)}))}))}(`qrCode${t.lineIndex}`,{value:t.line.value,width:t.line.width,height:t.line.height}),e.sender.send("render-line-reply",{status:!0,error:null})}catch(t){e.sender.send("render-line-reply",{status:!1,error:t.toString()})}return;case"barCode":try{const n=document.createElement("div"),l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttributeNS(null,"id",`barCode-${t.lineIndex}`),n.appendChild(l),h.appendChild(n),(null===(r=t.line)||void 0===r?void 0:r.style)?s(n,t.line.style):(n.style.display="flex",n.style.justifyContent=(null===(i=t.line)||void 0===i?void 0:i.position)||"left"),p(`#barCode-${t.lineIndex}`,t.line.value,{lineColor:"#000",textMargin:0,fontOptions:"bold",fontSize:t.line.fontsize||12,width:parseInt(t.line.width)||4,height:parseInt(t.line.height)||40,displayValue:!!t.line.displayValue}),e.sender.send("render-line-reply",{status:!0,error:null})}catch(t){e.sender.send("render-line-reply",{status:!1,error:t.toString()})}return;case"table":let l=document.createElement("div");l.setAttribute("id",`table-container-${t.lineIndex}`);let c=document.createElement("table");c.setAttribute("id",`table${t.lineIndex}`),c=s(c,Object.assign({},t.line.style));let u=document.createElement("thead");u=s(u,t.line.tableHeaderStyle);let f=document.createElement("tbody");f=s(f,t.line.tableBodyStyle);let y=document.createElement("tfoot");if(y=s(y,t.line.tableFooterStyle),t.line.tableHeader)for(const n of t.line.tableHeader)if("object"==typeof n)switch(n.type){case"image":yield a(n).then((e=>{const t=document.createElement("th");t.appendChild(e),u.appendChild(t)})).catch((t=>{e.sender.send("render-line-reply",{status:!1,error:t.toString()})}));break;case"text":u.appendChild(d(n,"th"))}else{const e=document.createElement("th");e.innerHTML=n,u.appendChild(e)}if(t.line.tableBody)for(const n of t.line.tableBody){const t=document.createElement("tr");for(const r of n)if("object"==typeof r)switch(r.type){case"image":yield a(r).then((e=>{const n=document.createElement("td");n.appendChild(e),t.appendChild(n)})).catch((t=>{e.sender.send("render-line-reply",{status:!1,error:t.toString()})}));break;case"text":t.appendChild(d(r))}else{const e=document.createElement("td");e.innerHTML=r,t.appendChild(e)}f.appendChild(t)}if(t.line.tableFooter)for(const n of t.line.tableFooter)if("object"==typeof n)switch(n.type){case"image":yield a(n).then((e=>{const t=document.createElement("th");t.appendChild(e),y.appendChild(t)})).catch((t=>{e.sender.send("render-line-reply",{status:!1,error:t.toString()})}));break;case"text":y.appendChild(d(n,"th"))}else{const e=document.createElement("th");e.innerHTML=n,y.appendChild(e)}return c.appendChild(u),c.appendChild(f),c.appendChild(y),l.appendChild(c),h.appendChild(l),void e.sender.send("render-line-reply",{status:!0,error:null})}}))}))})()})();